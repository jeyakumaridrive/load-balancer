<html itemscope itemtype="http://schema.org/Product" prefix="og: http://ogp.me/ns#" xmlns="http://www.w3.org/1999/html">
  <head>
    <!--#include virtual="head.html" -->
    <meta charset="utf-8">
    <meta http-equiv="content-type" content="text/html;charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!--#include virtual="base.html" -->

    <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
    <button style="display: none;" id="muteAll"></button>
    <button style="display: none;" id="unmuteAll"></button>
    <button style="display: none;" id="Kickout"></button>
    <button style="display: none;" id="mute_single"></button>
    <button style="display: none;" id="unmute_single"></button>
    


    <link rel="stylesheet" href="css/all.css?v=245">
    <button style="display: none;" id="ShowMyBoard"></button> 
    <button style="display: none;" id="closeMyBoard"></button> 
    <audio id="hidden-jitsi-audio" style="display:none;" src="sounds/alert.mp3"></audio>
    <input type="hidden" class="true-joining" id="true-joining" value="0">
     <div style="display: none;">
        <div class="select">
            <label for="audioSource">Audio input source: </label><select id="audioSource"></select>
        </div>

        <div class="select">
            <label for="audioOutput">Audio output destination: </label><select id="audioOutput"></select>
        </div>

        <div class="select">
            <label for="videoSource">Video source: </label><select id="videoSource"></select>
        </div>
    </div>
    <script>
        // IE11 and earlier can be identified via their user agent and be
        // redirected to a page that is known to have no newer js syntax.
        if (window.navigator.userAgent.match(/(MSIE|Trident)/)) {
            var roomName = encodeURIComponent(window.location.pathname);
            window.location.href = "static/recommendedBrowsers.html" + "?room=" + roomName;
        }

        window.indexLoadedTime = window.performance.now();
        console.log("(TIME) index.html loaded:\t", indexLoadedTime);
        // XXX the code below listeners for errors and displays an error message
        // in the document body when any of the required files fails to load.
        // The intention is to prevent from displaying broken page.
        var criticalFiles = [
            "config.js",
            "utils.js",
            "do_external_connect.js",
            "interface_config.js",
            "logging_config.js",
            "lib-jitsi-meet.min.js",
            "app.bundle.min.js",
            "all.css"
        ];
        var loadErrHandler = function(e) {
            var target = e.target;
            // Error on <script> and <link>(CSS)
            // <script> will have .src and <link> .href
            var fileRef = (target.src ? target.src : target.href);
            if (("SCRIPT" === target.tagName || "LINK" === target.tagName)
                && criticalFiles.some(
                    function(file) { return fileRef.indexOf(file) !== -1 })) {
                window.onload = function() {
                    // The whole complex part below implements page reloads with
                    // "exponential backoff". The retry attempt is passes as
                    // "rCounter" query parameter
                    var href = window.location.href;

                    var retryMatch = href.match(/.+(\?|&)rCounter=(\d+)/);
                    var retryCountStr = retryMatch ? retryMatch[2] : "0";
                    var retryCount = Number.parseInt(retryCountStr);

                    if (retryMatch == null) {
                        var separator = href.indexOf("?") === -1 ? "?" : "&";
                        var hashIdx = href.indexOf("#");

                        if (hashIdx === -1) {
                            href += separator + "rCounter=1";
                        } else {
                            var hashPart = href.substr(hashIdx);

                            href = href.substr(0, hashIdx)
                                + separator + "rCounter=1" + hashPart;
                        }
                    } else {
                        var separator = retryMatch[1];

                        href = href.replace(
                            /(\?|&)rCounter=(\d+)/,
                            separator + "rCounter=" + (retryCount + 1));
                    }

                    var delay = Math.pow(2, retryCount) * 2000;
                    if (isNaN(delay) || delay < 2000 || delay > 60000)
                        delay = 10000;

                    var showMoreText = "show more";
                    var showLessText = "show less";

                    document.body.innerHTML
                        = "<div style='"
                        + "position: absolute;top: 50%;left: 50%;"
                        + "text-align: center;"
                        + "font-size: medium;"
                        + "font-weight: 400;"
                        + "transform: translate(-50%, -50%)'>"
                        + "Uh oh! We couldn't fully download everything we needed :("
                        + "<br/> "
                        + "We will try again shortly. In the mean time, check for problems with your Internet connection!"
                        + "<br/><br/> "
                        + "<div id='moreInfo' style='"
                        + "display: none;'>" + "Missing " + fileRef
                        + "<br/><br/></div>"
                        + "<a id='showMore' style='"
                        + "text-decoration: underline;"
                        + "font-size:small;"
                        + "cursor: pointer'>" + showMoreText + "</a>"
                        + "&nbsp;&nbsp;&nbsp;"
                        + "<a id ='reloadLink' style='"
                        + "text-decoration: underline;"
                        + "font-size:small;"
                        + "'>reload now</a>"
                        + "</div>";

                    var reloadLink = document.getElementById('reloadLink');
                    reloadLink.setAttribute('href', href);

                    var showMoreElem = document.getElementById("showMore");
                    showMoreElem.addEventListener('click', function () {
                            var moreInfoElem
                                    = document.getElementById("moreInfo");

                            if (showMoreElem.innerHTML === showMoreText) {
                                moreInfoElem.setAttribute(
                                    "style",
                                    "display: block;"
                                    + "color:#FF991F;"
                                    + "font-size:small;"
                                    + "user-select:text;");
                                showMoreElem.innerHTML = showLessText;
                            }
                            else {
                                moreInfoElem.setAttribute(
                                    "style", "display: none;");
                                showMoreElem.innerHTML = showMoreText;
                            }
                        });

                    window.setTimeout(
                        function () { window.location.replace(href); }, delay);

                    // Call extra handler if defined.
                    if (typeof postLoadErrorHandler === "function") {
                        postLoadErrorHandler(fileRef);
                    }
                };
                window.removeEventListener(
                    'error', loadErrHandler, true /* capture phase */);
            }
        };
        window.addEventListener(
            'error', loadErrHandler, true /* capture phase type of listener */);
                function parseJSONSafely(str) {
                try {
                    return JSON.parse(str);
                }
                catch (e) {
                    //console.err(e);
                    // Return a default object, or null based on use case.
                    return 'false'
                }
                }

                function getUrlVars()
                {
                    var vars = [], hash;
                    var hashes = decodeURIComponent(window.location.href).slice(window.location.href.indexOf('?') + 1).split('&');
                    for(var i = 0; i < hashes.length; i++)
                    {
                        hash = hashes[i].split('=');
                        vars.push(hash[0]);
                        vars[hash[0]] = hash[1];
                    }
                    return vars;
                }

                var configDev = getUrlVars()["config._devices"];
                var configvideostatus = getUrlVars()["config.startWithVideoMuted"];

                if(configvideostatus)
                {
                    var isParseStatus = parseJSONSafely(configvideostatus);
                    if(isParse != 'false')
                    {
                        var camState = JSON.parse(configvideostatus);
                        if(camState == false || camState == 'false')
                        {
                            localStorage.setItem('camstateMuted','false');
                        }
                        else
                        {
                            localStorage.setItem('camstateMuted', 'true');
                        }
                    }
                }

                if(configDev)
                {
                    var isParse = parseJSONSafely(configDev);
                    if(isParse != 'false')
                    {
                        var parseData = JSON.parse(configDev);
                        var cam = parseData.videoinput.name;
                        var microphones = parseData.audioinput.name;
                        var speakerscam = parseData.audiooutput.name;
                        if(cam)
                        {
                            localStorage.setItem('camera',cam);
                        }
                        else
                        {
                            localStorage.setItem('camera',"");
                        }
                        if(microphones)
                        {
                            localStorage.setItem('microphones',microphones);
                        }
                        else
                        {
                           localStorage.setItem('microphones',""); 
                        }
                        if(speakerscam)
                        {
                            localStorage.setItem('speakerscam',speakerscam);
                        } 
                        else
                        {
                            localStorage.setItem('speakerscam',"");
                        }
                    }
                    else
                    {
                        localStorage.setItem('camera',"");
                        localStorage.setItem('microphones',"");
                        localStorage.setItem('speakerscam',"");
                    }

                }
                else
                {
                    localStorage.setItem('camera',"");
                    localStorage.setItem('microphones',"");
                    localStorage.setItem('speakerscam',"");
                }
                'use strict';

                const videoElement = document.querySelector('video');
                const audioInputSelect = document.querySelector('select#audioSource');
                const audioOutputSelect = document.querySelector('select#audioOutput');
                const videoSelect = document.querySelector('select#videoSource');
                const selectors = [audioInputSelect, audioOutputSelect, videoSelect];

                //audioOutputSelect.disabled = !('sinkId' in HTMLMediaElement.prototype);

                function gotDevices(deviceInfos) {
                  // Handles being called several times to update labels. Preserve values.
                  const values = selectors.map(select => select.value);
                  selectors.forEach(select => {
                    while (select.firstChild) {
                      select.removeChild(select.firstChild);
                    }
                  });
                  for (let i = 0; i !== deviceInfos.length; ++i) {
                    const deviceInfo = deviceInfos[i];
                    const option = document.createElement('option');
                    option.value = deviceInfo.deviceId;
                    if (deviceInfo.kind === 'audioinput') {
                      option.text = deviceInfo.label || `microphone ${audioInputSelect.length + 1}`;
                      audioInputSelect.appendChild(option);
                    } else if (deviceInfo.kind === 'audiooutput') {
                      option.text = deviceInfo.label || `speaker ${audioOutputSelect.length + 1}`;
                      audioOutputSelect.appendChild(option);
                    } else if (deviceInfo.kind === 'videoinput') {
                      option.text = deviceInfo.label || `camera ${videoSelect.length + 1}`;
                      videoSelect.appendChild(option);
                    } else {
                      console.log('Some other kind of source/device: ', deviceInfo);
                    }
                  }
                  selectors.forEach((select, selectorIndex) => {
                    if (Array.prototype.slice.call(select.childNodes).some(n => n.value === values[selectorIndex])) {
                      select.value = values[selectorIndex];
                    }
                  });
                }
                function handleError(error) {
                  console.log('navigator.getUserMedia error: ', error);
                }
                navigator.mediaDevices.enumerateDevices().then(gotDevices).catch(handleError);


    </script>
    <script><!--#include virtual="/config.js" --></script><!-- adapt to your needs, i.e. set hosts and bosh path -->
    <!--#include virtual="connection_optimization/connection_optimization.html" -->
    <script src="libs/do_external_connect.min.js?v=1"></script>
    <script><!--#include virtual="/interface_config.js" --></script>
    <script><!--#include virtual="/logging_config.js" --></script>
    <script src="libs/lib-jitsi-meet.min.js?v=x243"></script>
    <script src="libs/app.bundle.min.js?v=X243"></script>

    <!--#include virtual="title.html" -->
    <!--#include virtual="plugin.head.html" -->
    <!--#include virtual="static/welcomePageAdditionalContent.html" -->
    <!--#include virtual="static/settingsToolbarAdditionalContent.html" -->
  </head>
  <body>
    <!--#include virtual="body.html" -->
    <div id="react"></div>
  </body>
</html>
<script type="text/javascript">
    setInterval(function(){
        let divs = document.getElementsByClassName('styled__NavItem-sc-716rt7-5');

            for (let x = 0; x < divs.length; x++) {
                let div = divs[x];
                let content = div.innerHTML.trim();

                if (content == 'Profile' || content == 'More') {
                    div.style.display = 'none';
                }
            }
            $('#localDisplayName').text('').append('You');
    },100)
    $(document).ready(function(){
        $(document).on('click','#unmutesingle2',function(){
           
            $('#unmute_single').click()
            $('.EDTcm').click()
        }) 
        //$('.ignore').on('click',function(){
        $(document).on('click','.ignore',function(){
            $('.EDTcm').click()
        })
    })
    
</script>


<script type="text/javascript">
    var default_selected_image = '/images/bg1.jpg'; 
    
    // get saved cookie value
    if(document.cookie.replace(/(?:(?:^|.*;\s*)virtual_background\s*\=\s*([^;]*).*$)|^.*$/, "$1")) {
        //console.log(document.cookie.replace(/(?:(?:^|.*;\s*)virtual_background\s*\=\s*([^;]*).*$)|^.*$/, "$1"));
        default_selected_image = document.cookie.replace(/(?:(?:^|.*;\s*)virtual_background\s*\=\s*([^;]*).*$)|^.*$/, "$1");
    }
       
    window.user_selected_image = default_selected_image;
       
    window.$default_virtual_background = window.location.hostname+default_selected_image;
    window.$default_virtual_background_image = default_selected_image;
</script>
